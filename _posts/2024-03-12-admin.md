---
layout: post
title:  "Modify Sign-Up Router & Administrator Permission Configuration "
categories: [ WebDev ]
image: assets/img/20240312_5.png
tags: [featured]
---

# Modify Sign-Up Router & Administrator Permission Configuration  
  
## íšŒì›ê°€ì…ì‹œ ì´ë©”ì¼ ì¶”ê°€   
  
1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìˆ˜ì •  
`ALTER TABLE users ADD COLUMN email VARCHAR(255) UNIQUE NOT NULL;`  
  
2. ë°±ì—”ë“œ ë¡œì§ ì—…ë°ì´íŠ¸  
![1]({{ site.baseurl }}/assets/img/20240312_1.png)  
  
`get_main_post` : @app.route('/')ë¡œ ì •ì˜ëœ ë·° í•¨ìˆ˜ì˜ ì´ë¦„ì„ ê°€ë¦¬í‚´  
- ë¡œê·¸ì¸ í•  ë•Œ ë©”ì¼ì€ ì“°ì§€ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì— Userí´ë˜ìŠ¤ì™€ load_userì—ì„œëŠ” emailì„ ì¡°íšŒí•˜ì§€ ì•ŠìŒ  
  
3. í…œí”Œë¦¿ ìˆ˜ì •(signup.html)
   
~~~
<!-- ì´ë©”ì¼ ì…ë ¥ í•„ë“œ ì¶”ê°€ -->
<div class="form-group">
    <label for="email">Email:</label>
    <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required>
</div>
~~~

<br>

## ì‚¬ìš©ì ê¶Œí•œ
1. ì‚¬ìš©ì ê¶Œí•œ êµ¬ë¶„ì„ ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì •
~~~
ALTER TABLE users ADD COLUMN is_admin BOOLEAN DEFAULT FALSE;
~~~

2. ì‚¬ìš©ì ëª¨ë¸ ë³€ê²½
- User í´ë˜ìŠ¤ì— is_admin ì†ì„±ì„ ì¶”ê°€í•´, ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ê´€ë¦¬ìì¸ì§€ ì•„ë‹Œì§€ë¥¼ í™•ì¸
![2]({{ site.baseurl }}/assets/img/20240312_2.png)

3. ê¶Œí•œ ê²€ì‚¬ë¥¼ ìœ„í•œ ë°ì½”ë ˆì´í„° ìƒì„±  
 
~~~
from functools import wraps
from flask import abort

def admin_required(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not current_user.is_authenticated or not current_user.is_admin:
            abort(403)  # Forbidden access
        return f(*args, **kwargs)
    return decorated_function
~~~

ğŸŒŸì½”ë“œ ì„¤ëª… í•„ìš”

4. ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì œí•œëœ ê° ë¼ìš°íŠ¸ì— ë°ì½”ë ˆì´í„° ì ìš©  
![3]({{ site.baseurl }}/assets/img/20240312_3.png)
  
5. ë¡œê·¸ì¸ ë¡œë” ìˆ˜ì •  
![4]({{ site.baseurl }}/assets/img/20240312_4.png)

6. ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ìˆ˜ì •í•´ì„œ ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬  
~~~
# MySQL
UPDATE users SET is_admin = TRUE WHERE username = 'íŠ¹ì •ì‚¬ìš©ìì´ë¦„';
~~~
  
ğŸŒŸì‹œê°„ íš¨ìœ¨ì„ ìœ„í•´ì„œ ë‚˜ì¤‘ì— ìˆ˜ì •í•˜ì§€ë§ê³  ì²˜ìŒë¶€í„° ì„¤ê³„ë¥¼ ì˜ í•˜ê³  ì§„í–‰í•  ê²ƒ....  


